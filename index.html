<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PCEA CENTER YOUTH PORTAL</title>
<style>
body{font-family:"Poppins",Arial,sans-serif;margin:0;background:#f5f7fa;color:#222;text-align:center;}
#splash-screen{position:fixed;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#004aad;color:white;z-index:9999;animation:fadeOut 3s forwards;animation-delay:3s;}
@keyframes fadeOut{to{opacity:0;visibility:hidden;}}
nav{background:#004aad;padding:10px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap;}
.nav-btn{background:white;border:none;padding:10px 18px;border-radius:25px;cursor:pointer;font-weight:600;transition:all .28s ease;}
.nav-btn:hover{transform:scale(1.04);background:#dbe9ff;}
.nav-btn.active{background:#002c7f;color:white;transform:scale(1.08);}
.page{display:none;padding:16px;animation:fadeIn .35s ease;max-width:800px;margin:12px auto;text-align:left;}
.page.active{display:block;}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px);}to{opacity:1;transform:none;}}
textarea{width:90%;max-width:760px;min-height:100px;border-radius:10px;padding:10px;border:1px solid#ccc;font-family:inherit;}
.post-btn{background:#004aad;color:#fff;border:none;padding:10px 18px;border-radius:8px;cursor:pointer;margin-top:10px;transition:all .2s ease;}
.post-btn:hover{transform:scale(1.03);background:#003580;}
#prayerList{width:90%;max-width:760px;margin:12px auto 40px;text-align:left;}
#prayerList .item{background:#e8edff;padding:10px;margin-bottom:10px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.05);}
footer{background:#004aad;color:white;padding:12px;margin-top:20px;font-size:.9rem;}
.countdown-container{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;margin:12px 0;}
.countdown{background:#dbe9ff;padding:10px 12px;border-radius:8px;flex:1;min-width:140px;}
a.whatsapp-link{color:#25D366;font-weight:bold;text-decoration:none;}
a.whatsapp-link:hover{text-decoration:underline;}
#confetti{pointer-events:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999;}
</style>
</head>
<body>

<!-- Splash -->
<div id="splash-screen" role="dialog" aria-hidden="false">
<h1 style="margin:0 0 8px 0;">PCEA CENTER YOUTH PORTAL</h1>
<div style="opacity:.95;">Created with pride by <strong>Ian Gathagu</strong></div>
</div>

<!-- Navigation -->
<nav>
<button class="nav-btn active" data-page="home" onclick="showPage('home',this)">üè† Home</button>
<button class="nav-btn" data-page="events" onclick="showPage('events',this)">üìÖ Events</button>
<button class="nav-btn" data-page="announcements" onclick="showPage('announcements',this)">üì¢ Announcements</button>
<button class="nav-btn" data-page="prayers" onclick="showPage('prayers',this)">üôè Prayer Requests</button>
<button class="nav-btn" data-page="leaders" onclick="showPage('leaders',this)">üë• Leaders</button>
<button class="nav-btn" data-page="trivia" onclick="showPage('trivia',this)">üéØ Trivia</button>
<button class="nav-btn" data-page="bible" onclick="showPage('bible',this)">üìñ Bible</button>
</nav>

<!-- Home -->
<section id="home" class="page active" aria-live="polite">
<h2>Welcome</h2>
<div class="countdown-container">
  <div class="countdown" id="rallyCountdown" data-label="Youth Rally"></div>
  <div class="countdown" id="conventionCountdown" data-label="Presbytery Youth Convention"></div>
</div>
<p>Welcome to the official PCEA Center Youth Portal. Use the menu above to navigate through Home, Events, Announcements, Prayer Requests, Leaders, Trivia, and Bible.</p>
<p><strong>Word of the Day:</strong> <span id="wordOfDay">Loading...</span></p>
<p><strong>Bible Verse of the Day:</strong> <span id="verseOfDay">Loading...</span></p>
<p>Stay updated via our WhatsApp channel: 
<a href="https://whatsapp.com/channel/0029VbAreot60eBWPwDZTl1p" target="_blank" class="whatsapp-link">PCEA CENTER YOUTH FELLOWSHIP üôè</a></p>
</section>

<!-- Events -->
<section id="events" class="page" aria-live="polite">
<h2>Upcoming Events</h2>
<ul>
<li><strong>Youth Rally ‚Äì 16th Nov 2025:</strong> Worship, fellowship, games, and teaching at PCEA Chieni Church.</li>
<li><strong>Presbytery Youth Convention ‚Äì 2nd‚Äì6th Dec 2025:</strong> 5-day Bible studies, workshops, leadership training. Bring a book. Charges Ksh1500 (full or instalments).</li>
</ul>
</section>

<!-- Announcements -->
<section id="announcements" class="page" aria-live="polite">
<h2>Announcements</h2>
<ul>
<li>Youth Rally ‚Äì 16th Nov 2025: Don‚Äôt miss worship, teaching, and fellowship at PCEA Chieni Church.</li>
<li>Presbytery Youth Convention ‚Äì 2nd‚Äì6th Dec 2025: Bible study, workshops, evening praise & worship. Bring a book. Charges Ksh1500 (full or instalments).</li>
</ul>
</section>

<!-- Prayer Requests -->
<section id="prayers" class="page" aria-live="polite">
<h2>Prayer Requests</h2>
<form id="prayerForm">
<textarea id="prayerText" placeholder="Type your prayer request here..." required></textarea><br>
<button type="submit" class="post-btn">Post Anonymously</button>
</form>
<div id="prayerList" aria-live="polite" aria-atomic="true"></div>
</section>

<!-- Leaders -->
<section id="leaders" class="page" aria-live="polite">
<h2>Leaders</h2>
<ul>
<li><strong>Chairperson:</strong> Zachary Gikonyo</li>
<li><strong>Vice Chairperson:</strong> Dalson Maina</li>
<li><strong>Secretary:</strong> Ian Gathagu</li>
<li><strong>Vice Secretary:</strong> Lydia Wamuyu</li>
<li><strong>Treasurer:</strong> Winnie Maundu</li>
</ul>
<p><em>Message from Secretary:</em> Welcome youth! Let‚Äôs grow together spiritually and socially in PCEA fellowship.</p>
</section>

<!-- Trivia -->
<section id="trivia" class="page" aria-live="polite">
<h2>Trivia Challenge</h2>
<div id="triviaQuestion"></div>
<div id="triviaOptions" style="margin-top:8px;"></div>
<div id="triviaFeedback" style="margin-top:8px;font-size:1.2rem;"></div>
<button id="nextQuestion" class="post-btn">Next Question</button>
<div id="confetti"></div>
</section>

<!-- Bible -->
<section id="bible" class="page" aria-live="polite">
<h2>Holy Bible</h2>
<label for="bookSelect">Book:</label>
<select id="bookSelect"></select>
<label for="chapterSelect">Chapter:</label>
<select id="chapterSelect"></select>
<div id="verses" style="margin-top:12px;text-align:left;"></div>
</section>

<footer>
<div>¬© 2025 PCEA Center Youth ‚Äî To God Be the Glory.</div>
<div style="opacity:.9; font-size:.95rem; margin-top:6px;">Created with pride by <strong>Ian Gathagu</strong></div>
</footer>

<script>
(function(){
// Navigation
const btns=Array.from(document.querySelectorAll('.nav-btn'));
const pages=Array.from(document.querySelectorAll('.page'));
const splash=document.getElementById('splash-screen');
window.showPage=function(pageId,btnElement){
  btns.forEach(b=>b.classList.remove('active'));
  let button=btnElement||btns.find(b=>b.dataset.page===pageId);
  if(button)button.classList.add('active');
  pages.forEach(p=>p.classList.remove('active'));
  const selected=document.getElementById(pageId);
  if(selected)selected.classList.add('active');
};
btns.forEach(b=>b.addEventListener('click',()=>showPage(b.dataset.page,b)));

// Prayer Requests
const prayerForm=document.getElementById('prayerForm');
const prayerText=document.getElementById('prayerText');
const prayerList=document.getElementById('prayerList');
let prayers=[];
try{prayers=JSON.parse(localStorage.getItem('prayers_v1')||'[]'); if(!Array.isArray(prayers))prayers=[];}catch(e){prayers=[];}
function renderPrayers(){prayerList.innerHTML='';[...prayers].reverse().forEach(item=>{const div=document.createElement('div');div.className='item';const dt=document.createElement('div');dt.style.fontSize='.85rem';dt.style.opacity='.85';dt.style.marginBottom='6px';dt.textContent=`Posted on ${item.date}`;const p=document.createElement('div');p.textContent=item.text;p.style.whiteSpace='pre-wrap';div.appendChild(p);div.appendChild(dt);prayerList.appendChild(div);});}
prayerForm.addEventListener('submit',function(e){e.preventDefault();const txt=(prayerText.value||'').trim();if(!txt){alert('Please write a prayer request before posting.');return;}prayers.push({text:txt,date:new Date().toLocaleString()});localStorage.setItem('prayers_v1',JSON.stringify(prayers));prayerText.value='';renderPrayers();showPage('prayers');});
renderPrayers();

// Splash
window.addEventListener('load',function(){setTimeout(()=>{if(splash)splash.style.display='none';showPage('home',btns.find(b=>b.dataset.page==='home'));},3200);});

// Word of the Day
const words=['Faith','Love','Hope','Grace','Peace','Joy','Service','Prayer','Truth','Wisdom'];
document.getElementById('wordOfDay').textContent=words[Math.floor(Math.random()*words.length)];

// Countdown
function countdown(targetId,dateStr){
  const el=document.getElementById(targetId);
  const target=new Date(dateStr).getTime();
  setInterval(()=>{
    const now=new Date().getTime();
    let dist=target-now;
    if(dist<0){el.innerHTML='Event Started!';return;}
    let d=Math.floor(dist/(1000*60*60*24)),
        h=Math.floor((dist%(1000*60*60*24))/(1000*60*60)),
        m=Math.floor((dist%(1000*60*60))/(1000*60)),
        s=Math.floor((dist%(1000*60))/1000);
    el.innerHTML=`<strong>${el.dataset.label}</strong><br>${d}d ${h}h ${m}m ${s}s`;
  },1000);
}
countdown('rallyCountdown','2025-11-16T00:00:00');
countdown('conventionCountdown','2025-12-02T00:00:00');

// Trivia
let triviaData=[],currentQuestion=0;
fetch('trivia_batch_1.json').then(r=>r.json()).then(data=>{triviaData=data;showTriviaQuestion();});
function showTriviaQuestion(){
  if(triviaData.length===0)return;
  const q=triviaData[currentQuestion%triviaData.length];
  document.getElementById('triviaQuestion').innerHTML=`<strong>${q.question}</strong>`;
  const optionsDiv=document.getElementById('triviaOptions');
  optionsDiv.innerHTML='';
  const feedbackDiv=document.getElementById('triviaFeedback');
  feedbackDiv.innerHTML='';
  q.options.forEach(opt=>{
    const btn=document.createElement('button');
    btn.textContent=opt;
    btn.className='nav-btn';
    btn.onclick=()=>{
      feedbackDiv.innerHTML='';
      const confettiContainer=document.getElementById('confetti');
      confettiContainer.innerHTML='';
      if(opt===q.answer){
        feedbackDiv.innerHTML='üéâ Correct!';
        for(let i=0;i<100;i++){
          const ribbon=document.createElement('div');
          ribbon.style.position='absolute';
          ribbon.style.width='10px';
          ribbon.style.height='30px';
          ribbon.style.backgroundColor=`hsl(${Math.random()*360},70%,60%)`;
          ribbon.style.left=Math.random()*100+'vw';
          ribbon.style.top='-30px';
          ribbon.style.transform=`rotate(${Math.random()*360}deg)`;
          ribbon.style.opacity=Math.random()+0.5;
          ribbon.style.animation=`fall ${2+Math.random()*3}s linear forwards`;
          confettiContainer.appendChild(ribbon);
        }
      } else { feedbackDiv.innerHTML=`üò¢ Wrong! Correct: ${q.answer}`; }
    };
    optionsDiv.appendChild(btn);
  });
}
document.getElementById('nextQuestion').onclick=()=>{currentQuestion++;showTriviaQuestion();};
// Confetti animation
const style=document.createElement('style');
style.innerHTML=`@keyframes fall{to{transform:translateY(100vh) rotate(360deg);opacity:0;}}`;
document.head.appendChild(style);

// Bible
let bibleData={};
fetch('bible.json').then(r=>r.json()).then(data=>{
  bibleData=data;
  const bookSelect=document.getElementById('bookSelect');
  Object.keys(bibleData).forEach(book=>{const opt=document.createElement('option');opt.value=book;opt.textContent=book;bookSelect.appendChild(opt);});
  populateChapters(bookSelect.value);
});
const bookSelect=document.getElementById('bookSelect');
const chapterSelect=document.getElementById('chapterSelect');
const versesDiv=document.getElementById('verses');
bookSelect.onchange=()=>populateChapters(bookSelect.value);
chapterSelect.onchange=()=>showVerses(bookSelect.value,chapterSelect.value);
function populateChapters(book){
  chapterSelect.innerHTML='';
  const chapters=Object.keys(bibleData[book]);
  chapters.forEach(chap=>{const opt=document.createElement('option');opt.value=chap;opt.textContent=chap;chapterSelect.appendChild(opt);});
  showVerses(book,chapters[0]);
}
function showVerses(book,chapter){
  versesDiv.innerHTML='';
  const verses=bibleData[book][chapter];
  Object.keys(verses).forEach(vNum=>{const p=document.createElement('p');p.innerHTML=`<strong>${vNum}</strong>: ${verses[vNum]}`;versesDiv.appendChild(p);});
}

// Verse of the Day
fetch('https://beta.ourmanna.com/api/v1/get/?format=json').then(r=>r.json()).then(data=>{
  document.getElementById('verseOfDay').textContent=`"${data.verse.details.text}" ‚Äî ${data.verse.details.reference}`;
});
})();
</script>
</body>
  </html>

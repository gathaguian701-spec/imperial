<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IMPERIAL TECHUB</title>

<style>
/* Global Style */
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f4f8ff;
    color: #001f54;
}

/* Navigation */
nav {
    background: #003b8e;
    padding: 15px;
    text-align: center;
}
nav a {
    color: white;
    margin: 0 15px;
    text-decoration: none;
    font-weight: bold;
    font-size: 18px;
}
nav a:hover {
    text-decoration: underline;
}

/* Intro Screen (5 Seconds) */
#intro-screen {
    position: fixed;
    width: 100%;
    height: 100%;
    background: #001F54;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    animation: fadeOut 5s ease forwards;
    z-index: 9999;
}
.intro-text {
    color: white;
    font-size: 40px;
    font-weight: bold;
    letter-spacing: 4px;
}
.pulse-loader {
    width: 20px;
    height: 20px;
    margin-top: 20px;
    border-radius: 50%;
    background: #4da3ff;
    animation: pulse 1.4s infinite;
}
@keyframes pulse {
    0% { transform: scale(0.8); opacity: 0.8; }
    50% { transform: scale(1.3); opacity: 1; }
    100% { transform: scale(0.8); opacity: 0.8; }
}
@keyframes fadeOut {
    0% { opacity: 1; }
    90% { opacity: 1; }
    100% { opacity: 0; visibility: hidden; }
}

/* Sections */
section {
    padding: 40px;
}

/* Leaders */
.leader-card {
    background: white;
    padding: 20px;
    margin: 15px 0;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

/* Hymns */
.hymn {
    background: white;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 15px;
}

/* Meeting Modal */
#meeting-modal {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.7);
    justify-content: center;
    align-items: center;
}
#meeting-box {
    background: white;
    width: 90%;
    height: 80%;
    border-radius: 10px;
    padding: 10px;
}

/* MiniPay Modal */
#minipay-modal {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
}
#minipay-box {
    background: white;
    padding: 25px;
    width: 350px;
    border-radius: 12px;
    text-align: center;
}
.membership-card {
    background: #e8f0ff;
    padding: 20px;
    border-radius: 10px;
    margin: 15px 0;
}
.buy-btn {
    background: #003b8e;
    color: white;
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    border: none;
}
</style>

</head>
<body>

<!-- INTRO SCREEN -->
<div id="intro-screen">
    <div class="intro-text">IMPERIAL TECHUB</div>
    <div class="pulse-loader"></div>
</div>

<script>
setTimeout(() => {
    document.getElementById("intro-screen").style.display = "none";
}, 5000);
</script>

<!-- NAVIGATION -->
<nav>
    <a href="#home">HOME</a>
    <a href="#events">EVENTS</a>
    <a href="#announcements">ANNOUNCEMENTS</a>
    <a href="#calendar">CALENDAR</a>
    <a href="#leaders">LEADERS</a>
    <a href="#hymnbook">HYMNBOOK</a>
    <a href="#membership">MEMBERSHIP</a>
    <a href="#" onclick="openMeetingModal()">MEETING</a>
</nav>

<!-- HOME -->
<section id="home">
    <h2>Fun Fact of the Day</h2>
    <p id="funfact"></p>
</section>

<script>
const facts = [
    "Did you know? The Bible is the best-selling book of all time.",
    "Jesus is mentioned in the Quran more than Muhammad.",
    "Psalm 118:8 is the center verse of the Bible.",
    "The shortest verse in the Bible is 'Jesus wept.'"
];
let factIndex = Math.floor((Date.now() / 86400000) % facts.length);
document.getElementById("funfact").innerText = facts[factIndex];
</script>

<!-- EVENTS -->
<section id="events">
    <h2>Upcoming Events</h2>
    <div id="countdowns"></div>
</section>

<script>
const events = [
    { name: "Youth Rally", date: "2025-11-16T09:00:00" },
    { name: "Presbytery Youth Convention", date: "2025-12-02T09:00:00" },
    { name: "Christmas Day", date: "2025-12-25T00:00:00" },
    { name: "New Year's Day", date: "2026-01-01T00:00:00" }
];

function updateCountdowns() {
    let html = "";
    events.forEach(ev => {
        const diff = new Date(ev.date) - new Date();
        if (diff > 0) {
            const d = Math.floor(diff / 86400000);
            const h = Math.floor((diff % 86400000) / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            html += `<p><strong>${ev.name}:</strong> ${d}d ${h}h ${m}m ${s}s</p>`;
        }
    });
    document.getElementById("countdowns").innerHTML = html;
}
setInterval(updateCountdowns, 1000);
</script>

<!-- ANNOUNCEMENTS -->
<section id="announcements">
    <h2>Announcements</h2>

    <h3>Youth Rally</h3>
    <p>There will be a Youth Rally on Sunday, 16th November, at PCEA Chieni Church.</p>

    <h3>Presbytery Youth Convention</h3>
    <p>The convention will be held from 2nd to 6th December 2025. Charges: Ksh 1500.</p>
</section>

<!-- CALENDAR -->
<section id="calendar">
    <h2>Calendar</h2>
    <ul>
        <li>Nov 16 — Youth Rally</li>
        <li>Dec 2–6 — Presbytery Youth Convention</li>
        <li>Dec 25 — Christmas Day</li>
        <li>Jan 1 — New Year's Day</li>
    </ul>
</section>

<!-- LEADERS -->
<section id="leaders">
    <h2>Our Leaders</h2>

    <div class="leader-card">
        <h3>Zachary Gikonyo — Chairperson</h3>
        <a href="https://wa.me/254742892647">WhatsApp</a> | <a href="tel:+254742892647">Call</a>
    </div>

    <div class="leader-card">
        <h3>Dalson Maina — Vice Chairperson</h3>
        <a href="https://wa.me/254714003648">WhatsApp</a> | <a href="tel:+254714003648">Call</a>
    </div>

    <div class="leader-card">
        <h3>Ian Gathagu — Secretary</h3>
        <a href="https://wa.me/254718357417">WhatsApp</a> | <a href="tel:+254718357417">Call</a>
    </div>

    <div class="leader-card">
        <h3>Lydia Wamuyu — Vice Secretary</h3>
        <a href="https://wa.me/254110867929">WhatsApp</a> | <a href="tel:+254110867929">Call</a>
    </div>

    <div class="leader-card">
        <h3>Winnie Maundu — Treasurer</h3>
        <a href="https://wa.me/254713285534">WhatsApp</a> | <a href="tel:+254713285534">Call</a>
    </div>
</section>

<!-- HYMNBOOK -->
<section id="hymnbook">
    <h2>Hymnbook</h2>
    <input type="text" id="searchHymn" placeholder="Search by any line..." style="padding:10px;width:90%;border-radius:8px;">
    <div id="hymns"></div>
</section>

<script>
const hymnList = [
    { title: "Hymn 1", lyrics: "Amazing grace how sweet the sound..." },
    { title: "Hymn 2", lyrics: "Great is thy faithfulness..." }
];

function loadHymns() {
    let html = "";
    hymnList.forEach(h => {
        html += `<div class='hymn'><h3>${h.title}</h3><p>${h.lyrics}</p></div>`;
    });
    document.getElementById("hymns").innerHTML = html;
}
loadHymns();

document.getElementById("searchHymn").addEventListener("input", function(){
    let q = this.value.toLowerCase();
    let html = "";
    hymnList.forEach(h => {
        if (h.lyrics.toLowerCase().includes(q) || h.title.toLowerCase().includes(q)) {
            html += `<div class='hymn'><h3>${h.title}</h3><p>${h.lyrics}</p></div>`;
        }
    });
    document.getElementById("hymns").innerHTML = html;
});
</script>

<!-- MEMBERSHIP -->
<section id="membership">
    <h2>Youth Membership</h2>

    <div class="membership-card">
        <h3>Gold — KSh 300</h3>
        <button class="buy-btn" onclick="openMiniPay('gold')">Buy</button>
    </div>

    <div class="membership-card">
        <h3>Platinum — KSh 500</h3>
        <button class="buy-btn" onclick="openMiniPay('platinum')">Buy</button>
    </div>

    <div class="membership-card">
        <h3>Diamond — KSh 1000</h3>
        <button class="buy-btn" onclick="openMiniPay('diamond')">Buy</button>
    </div>
</section>

<!-- MINIPAY MODAL -->
<div id="minipay-modal">
    <div id="minipay-box">
        <h2>MiniPay Checkout</h2>
        <p id="mp-text"></p>
        <button onclick="pay()">Confirm Payment</button><br><br>
        <button onclick="closeMiniPay()">Close</button>
    </div>
</div>

<script>
let currentPlan = "";

function openMiniPay(plan){
    currentPlan = plan;
    document.getElementById("mp-text").innerText = 
        "You are purchasing the " + plan.toUpperCase() + " membership.";
    document.getElementById("minipay-modal").style.display = "flex";
}

function closeMiniPay(){
    document.getElementById("minipay-modal").style.display = "none";
}

function pay(){
    alert("MiniPay TEST MODE: Payment successful for " + currentPlan.toUpperCase());
    closeMiniPay();
}
</script>

<!-- MEETING MODAL -->
<div id="meeting-modal">
    <div id="meeting-box">
        <button onclick="closeMeetingModal()" style="float:right;">Close</button>
        <div id="jitsiContainer" style="width:100%;height:95%;"></div>
    </div>
</div>

<script src="https://8x8.vc/vpaas-magic-cookie-756b4b93478540f5bb2e85a9a346496b/external_api.js"></script>

<script>
function openMeetingModal(){
    document.getElementById("meeting-modal").style.display = "flex";

    const domain = "8x8.vc";
    const options = {
        roomName: "IMPERIAL-TECHUB-MEETING",
        parentNode: document.querySelector('#jitsiContainer'),
        width: "100%",
        height: "100%"
    };
    new JitsiMeetExternalAPI(domain, options);
}
function closeMeetingModal(){
    document.getElementById("meeting-modal").style.display = "none";
    document.getElementById("jitsiContainer").innerHTML = "";
}
</script>

<!-- FOOTER -->
<footer style="text-align:center;padding:20px;margin-top:40px;color:#003b8e;">
    PROUDLY CREATED BY IAN GATHAGU <br>
    v1.3.2
</footer>

</body>
  </html>
